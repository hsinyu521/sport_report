<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‹å‹•ç´€éŒ„æœ¬</title>
    <link rel="icon" type="image/png" href="./lotus.png">
    <link rel="apple-touch-icon" href="./lotus.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./lotus.png">

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            /* é»ƒè‰²æº«æš–é‹å‹•é¢¨ */
            --bg-main: #FFF4CC;
            --bg-card: #FFFBEA;
            --yellow: #FFD43B;
            --orange: #FFA94D;
            --text-dark: #6B4E16;
            --border: #FFE8A3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background: var(--bg-main);
            min-height: 100vh;
            color: var(--text-dark);
            padding-bottom: 40px;
            overflow-x: hidden;
        }

        /* é ‚éƒ¨ */
        .status-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px 20px;
            background: var(--yellow);
            color: var(--text-dark);
            font-weight: 900;
            font-size: 1.3rem;
            position: sticky;
            top: 0;
            z-index: 30;
        }

        /* å®¹å™¨ */
        .container {
            padding: 20px;
            max-width: 650px;
            margin: 0 auto;
        }

        /* è¡¨å–®å¡ç‰‡ */
        .form-card {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
            border: 2px solid var(--border);
            margin-bottom: 20px;
        }

        .form-title {
            font-size: 1.4rem;
            font-weight: 900;
            margin-bottom: 15px;
            color: var(--orange);
        }

        label {
            display: block;
            font-weight: 700;
            margin-top: 10px;
            margin-bottom: 5px;
        }

        input,
        select {
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            border: 2px solid var(--border);
            background: white;
            font-size: 1rem;
        }

        .switch-row {
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
        }

        button {
            margin-top: 15px;
            width: 100%;
            padding: 12px 0;
            background: var(--orange);
            border: none;
            border-radius: 14px;
            font-size: 1.2rem;
            color: white;
            font-weight: 900;
            cursor: pointer;
        }

        button:hover {
            background: #ff922b;
        }

        /* é‹å‹•å¡ç‰‡ */
        .record-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            padding: 15px;
            border-radius: 16px;
            margin-bottom: 15px;
        }

        .record-header {
            display: flex;
            justify-content: space-between;
            font-weight: 900;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .record-content {
            margin-top: 10px;
            display: none;
            line-height: 1.6;
            padding-left: 5px;
        }

        .btn-row {
            margin-top: 10px;
            display: flex;
            gap: 10px;
        }

        .edit-btn,
        .delete-btn {
            flex: 1;
            padding: 10px 0;
            border-radius: 10px;
            color: white;
            border: none;
            font-weight: 700;
            cursor: pointer;
        }

        .edit-btn {
            background: #74c0fc;
        }

        .delete-btn {
            background: #ff6b6b;
        }

        /* AI å›é¥‹ */
        .ai-box {
            background: #fff9db;
            padding: 15px;
            margin-top: 20px;
            border-radius: 15px;
            border: 2px solid #ffe8a3;
        }

        .ai-title {
            font-weight: 900;
            color: var(--orange);
            margin-bottom: 5px;
        }
    </style>
</head>

<body>
    <div class="status-bar">ğŸ‹ï¸ é‹å‹•ç´€éŒ„æœ¬</div>

    <div class="container">

        <!-- æ–°å¢é‹å‹•è¡¨å–® -->
        <div class="form-card">
            <div class="form-title">æ–°å¢ä»Šæ—¥é‹å‹•</div>

            <label>é‹å‹•é …ç›®</label>
            <input id="exerciseName" placeholder="ä¾‹å¦‚ï¼šæ·±è¹²ã€ç‘œçˆã€æ…¢è·‘...">

            <label>ç´€éŒ„æ–¹å¼</label>
            <select id="modeSwitch">
                <option value="minutes">åˆ†é˜</option>
                <option value="times">æ¬¡æ•¸</option>
            </select>

            <label id="amountLabel">é‹å‹•åˆ†é˜</label>
            <input id="exerciseAmount" type="number" min="1" placeholder="ä¾‹å¦‚ï¼š30">

            <button onclick="addExercise()">åŠ å…¥ç´€éŒ„</button>
        </div>

        <!-- AI å»ºè­° -->
        <div id="aiOutput" class="ai-box" style="display:none;">
            <div class="ai-title">ğŸ”¥ ä»Šæ—¥ AI é¼“å‹µèˆ‡æŠ€å·§</div>
            <div id="aiText"></div>
        </div>

        <!-- æ­·å²ç´€éŒ„ -->
        <h2 style="margin:20px 0 10px; font-weight:900;">ğŸ“… é‹å‹•ç´€éŒ„</h2>
        <div id="recordList"></div>

    </div>

    <script>
        const recordListEl = document.getElementById("recordList");
        const modeSwitch = document.getElementById("modeSwitch");
        const amountLabel = document.getElementById("amountLabel");

        let records = JSON.parse(localStorage.getItem("records") || "[]");

        modeSwitch.addEventListener("change", () => {
            amountLabel.textContent = modeSwitch.value === "minutes"
                ? "é‹å‹•åˆ†é˜"
                : "é‹å‹•æ¬¡æ•¸";
        });

        /* --- æ–°å¢ç´€éŒ„ --- */
        function addExercise() {
            const name = document.getElementById("exerciseName").value.trim();
            const amount = document.getElementById("exerciseAmount").value.trim();
            const mode = modeSwitch.value;

            if (!name || !amount) return alert("è«‹å®Œæ•´è¼¸å…¥å…§å®¹ï¼");

            const newRecord = {
                id: Date.now(),
                date: new Date().toLocaleDateString("zh-TW"),
                name,
                amount,
                mode
            };

            records.unshift(newRecord);
            localStorage.setItem("records", JSON.stringify(records));
            renderRecords();
            callAI(newRecord);
        }

        /* --- æ¸²æŸ“ç´€éŒ„ --- */
        function renderRecords() {
            recordListEl.innerHTML = "";

            records.forEach(r => {
                const card = document.createElement("div");
                card.className = "record-card";

                card.innerHTML = `
                    <div class="record-header" onclick="toggleContent(${r.id})">
                        <div>${r.date}</div>
                        <div>${r.name}</div>
                    </div>

                    <div class="record-content" id="content-${r.id}">
                        <div>é‹å‹•ï¼š${r.name}</div>
                        <div>é‡ï¼š${r.amount} ${r.mode === "minutes" ? "åˆ†é˜" : "æ¬¡"}</div>

                        <div class="btn-row">
                            <button class="edit-btn" onclick="editRecord(${r.id})">ç·¨è¼¯</button>
                            <button class="delete-btn" onclick="deleteRecord(${r.id})">åˆªé™¤</button>
                        </div>
                    </div>
                `;

                recordListEl.appendChild(card);
            });
        }

        function toggleContent(id) {
            const el = document.getElementById(`content-${id}`);
            el.style.display = el.style.display === "block" ? "none" : "block";
        }

        /* --- ç·¨è¼¯ç´€éŒ„ --- */
        function editRecord(id) {
            const r = records.find(x => x.id === id);
            const newName = prompt("ä¿®æ”¹é‹å‹•é …ç›®ï¼š", r.name);
            if (!newName) return;
            const newAmount = prompt("ä¿®æ”¹æ•¸å€¼ï¼š", r.amount);
            if (!newAmount) return;

            r.name = newName;
            r.amount = newAmount;

            localStorage.setItem("records", JSON.stringify(records));
            renderRecords();
        }

        /* --- åˆªé™¤ç´€éŒ„ --- */
        function deleteRecord(id) {
            if (!confirm("ç¢ºå®šè¦åˆªé™¤å—ï¼Ÿ")) return;
            records = records.filter(x => x.id !== id);
            localStorage.setItem("records", JSON.stringify(records));
            renderRecords();
        }

/* --- AI é¼“å‹µèªå¥ï¼šæ”¹ç”¨æœ¬åœ° 30 å¥çŸ­å¥éš¨æ©ŸæŠ½å– --- */
const encouragingMessages = [
    "ä½ ä»Šå¤©åšå¾—å¾ˆæ£’ï¼",
    "å†å‰é€²ä¸€é»é»å°±æ›´å¼·äº†ï¼",
    "å …æŒçš„ä½ æœ€é…·ï¼",
    "æ¯ä¸€æ­¥éƒ½ç®—æ•¸ï¼",
    "ç´¯äº†è¡¨ç¤ºä½ åœ¨è®Šå¼·ï¼",
    "ä»Šå¤©çš„åŠªåŠ›å¾ˆå€¼å¾—ï¼",
    "ä½ çš„é€²æ­¥æ¯”ä½ æƒ³çš„å¤šï¼",
    "åªè¦é–‹å§‹å°±æ˜¯è´ï¼",
    "ä½ æ¯”æ˜¨å¤©æ›´é å‰äº†ï¼",
    "ä¿æŒå°ˆæ³¨ï¼ŒåŠ›é‡åœ¨ç´¯ç©ï¼",
    "ä½ çš„åŠªåŠ›æ­£åœ¨è¢«çœ‹è¦‹ï¼",
    "å†ä¸€é»é»å°±é”æˆç›®æ¨™ï¼",
    "æ…¢æ…¢ä¾†ä¹Ÿæ²’é—œä¿‚ï¼",
    "ä»Šå¤©çš„å …æŒå¾ˆé‡è¦ï¼",
    "ä½ åšå¾—æ¯”ä½ æƒ³åƒå¾—å¥½ï¼",
    "å‹•èµ·ä¾†çš„ä½ å¾ˆè€€çœ¼ï¼",
    "åˆ¥å°çœ‹æ¯æ¬¡çš„ç´¯ç©ï¼",
    "ä»Šå¤©çš„ä½ å¾ˆå€¼å¾—è¢«ç¨±è®šï¼",
    "ä½ çš„æ„å¿—åŠ›è¶…å¼·ï¼",
    "ä½ æ­£æŠŠè‡ªå·±è®Šå¾—æ›´å¥½ï¼",
    "é€™ä¸€æ­¥æ˜¯å¥½é–‹å§‹ï¼",
    "ä½ çš„èº«é«”æœƒæ„Ÿè¬ä½ ï¼",
    "ä¿æŒç¯€å¥å°±å¾ˆå¥½ï¼",
    "ä½ æ­£åœ¨å¯«ä¸‹å¥½ç¿’æ…£ï¼",
    "ä»Šå¤©çš„ä½ çœŸçš„å¾ˆåŠªåŠ›ï¼",
    "ä½ å€¼å¾—ç‚ºè‡ªå·±é©•å‚²ï¼",
    "åšå¾—å¥½ï¼Œç¹¼çºŒä¿æŒï¼",
    "ä»Šå¤©åˆæ˜¯æˆåŠŸçš„ä¸€æ­¥ï¼",
    "ä½ é›¢ç›®æ¨™è¶Šä¾†è¶Šè¿‘äº†ï¼",
    "åšå¾—è¶…æ£’ï¼ç¹¼çºŒåŠ æ²¹ï¼"
];

/* --- ä»Šæ—¥æŠ€å·§å°æé†’ï¼ˆå›ºå®šä¸€å¥ï¼‰ --- */
function getTipText(record) {
    if (record.mode === "minutes") {
        return "ä¿æŒç©©å®šå‘¼å¸èˆ‡ç¯€å¥æ›´æœ‰æ•ˆç‡å–”ï¼";
    } else {
        return "æ³¨æ„å‹•ä½œå§¿å‹¢ï¼Œå“è³ªæ¯”æ•¸é‡æ›´é‡è¦ï¼";
    }
}

/* --- AI æ›¿æ›ï¼šæ”¹æˆæœ¬åœ°éš¨æ©Ÿæ–‡å­— --- */
function callAI(record) {
    const randomIndex = Math.floor(Math.random() * encouragingMessages.length);
    const message = encouragingMessages[randomIndex];
    const tip = getTipText(record);

    const finalText = `${message}  ${tip}`;

    document.getElementById("aiText").textContent = finalText;
    document.getElementById("aiOutput").style.display = "block";
}


        renderRecords();
    </script>
</body>

</html>
